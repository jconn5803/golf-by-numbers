{% extends "base.html" %}

{% block title %}Add Holes{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center">Add Holes for Tee: {{ tee.name }}</h2>
    <form action="{{ url_for('add_holes', tee_id=tee.teeID) }}" method="POST">
        <!-- Slider for selecting the number of holes -->
        <div class="mb-4">
            <label for="num_holes" class="form-label fw-bold">Number of Holes:</label>
            <input type="range" class="form-range" id="num_holes" name="num_holes" min="9" max="18" step="9" value="18" 
                   oninput="updateHoleNumbers(this.value)">
            <div class="d-flex justify-content-between">
                <span>9</span>
                <span>18</span>
            </div>
        </div>

        <!-- Table for entering hole details -->
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Hole Number</th>
                    <th>Distance (yards)</th>
                    <th>Par</th>
                </tr>
            </thead>
            <tbody id="holes_table">
                <!-- Rows will be dynamically generated by JavaScript -->
            </tbody>
        </table>

        <!-- Submit button -->
        <div class="text-center">
            <button type="submit" class="btn btn-primary">Save Holes</button>
        </div>
    </form>
</div>

<script>
    // Update the table rows dynamically based on the number of holes selected
    function updateHoleNumbers(numHoles) {
        const tableBody = document.getElementById('holes_table');
        tableBody.innerHTML = '';  // Clear existing rows

        for (let i = 1; i <= numHoles; i++) {
            const row = `
                <tr>
                    <td>${i}</td>
                    <td><input type="number" name="distances" class="form-control" required></td>
                    <td>
                        <select name="pars" class="form-select" required>
                            <option value="3">Par 3</option>
                            <option value="4">Par 4</option>
                            <option value="5">Par 5</option>
                        </select>
                    </td>
                </tr>
            `;
            tableBody.innerHTML += row;
        }
    }

    // Initialize the table with 18 holes
    document.addEventListener('DOMContentLoaded', () => {
        updateHoleNumbers(18);
    });
</script>
{% endblock %}
