{% extends "base.html" %}

{% block title %}Add Shots{% endblock %}


{% block extra_css %}
  <!-- If you have page-specific CSS, include it here -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/add_shots.css') }}">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center">Add Shots for Round</h2>
    <form method="POST" id="add-shots-form">
        {% for hole in holes %}
        <div class="card mb-3">
            <div class="card-header">
                Hole {{ hole.number }} - Par {{ hole.par }}
            </div>
            <div class="card-body">
                <div id="hole_{{ hole.number }}_shots" class="shots-container">
                    <!-- Prefill the first shot's distance -->
                    <div class="shot-card" id="hole_{{ hole.number }}_shot_1">
                        <h5>Shot #1</h5>
                        <div class="mb-3">
                            <label for="hole_{{ hole.number }}_shot_1_distance" class="form-label">Distance (yards):</label>
                            <input 
                                type="number" 
                                class="form-control" 
                                name="hole_{{ hole.number }}_shot_1_distance" 
                                id="hole_{{ hole.number }}_shot_1_distance" 
                                value="{{ hole.distance }}" 
                                required
                            >
                        </div>
                        <div class="mb-3">
                            <label for="hole_{{ hole.number }}_shot_1_lie" class="form-label">Lie:</label>
                            <select 
                                class="form-select" 
                                name="hole_{{ hole.number }}_shot_1_lie" 
                                id="hole_{{ hole.number }}_shot_1_lie" 
                                required 
                                onchange="updateMissDirection({{ hole.number }}, 1, {{ hole.par }})"
                            >
                                <option value="Tee" selected>Tee</option>
                                <option value="Fairway">Fairway</option>
                                <option value="Rough">Rough</option>
                                <option value="Bunker">Bunker</option>
                                <option value="Recovery">Recovery</option>
                                <option value="Green">Green</option>
                            </select>
                        </div>

                        <div class="form-check form-check-inline">
                            <input 
                                type="checkbox" 
                                class="form-check-input" 
                                name="hole_{{ hole.number }}_shot_1_out_of_bounds" 
                                id="hole_{{ hole.number }}_shot_1_out_of_bounds" 
                                value="1"
                                onchange="addDummyShot({{ hole.number }}, 1, 'OOB', {{hole.par}})"
                            >
                            <label for="hole_{{ hole.number }}_shot_1_out_of_bounds" class="form-check-label">Out of Bounds</label>
                        </div>

                        <div class="form-check form-check-inline">
                            <input 
                                type="checkbox" 
                                class="form-check-input" 
                                name="hole_{{ hole.number }}_shot_1_hazard" 
                                id="hole_{{ hole.number }}_shot_1_hazard" 
                                value="1"
                                onchange="addDummyShot({{ hole.number }}, 1, 'hazard', {{hole.par}})"
                            >
                            <label for="hole_{{ hole.number }}_shot_1_hazard" class="form-check-label">Hazard/Unplayable</label>
                        </div>
                        
                        <!-- We always include a remove-shot button in HTML, but it will be shown/hidden dynamically -->
                        <button 
                            type="button" 
                            class="btn btn-danger btn-sm remove-shot-btn" 
                            onclick="removeShot({{ hole.number }}, 1)"
                        >
                            Remove Shot
                        </button>
                    </div>
                </div>
                <!-- Button to add more shots -->
                <button 
                    type="button" 
                    class="btn btn-secondary" 
                    onclick="addShot({{ hole.number }}, {{ hole.par }})"
                >
                    Add Shot
                </button>
            </div>
        </div>
        {% endfor %}
        <div class="text-center">
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
  <script src="{{ url_for('static', filename='js/shot_entry_form.js') }}"></script>
{% endblock %}